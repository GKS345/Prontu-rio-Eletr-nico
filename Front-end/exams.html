<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exames - Sistema MÃ©dico</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">MedSystem</div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html">ğŸ“Š VisÃ£o Geral</a></li>
                <li><a href="patients.html">ğŸ‘¥ Pacientes</a></li>
                <li><a href="new-patient.html">â• Novo Paciente</a></li>
                <li><a href="appointments.html">ğŸ“… Consultas</a></li>
                <li><a href="exams.html" class="active">ğŸ”¬ Exames</a></li>
                <li><a href="prescriptions.html">ğŸ’Š Receitas</a></li>
                <li><a href="reports.html">ğŸ“‹ RelatÃ³rios</a></li>
                <li><a href="./index.html">ğŸšª Sair</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 class="page-title">Exames</h1>
                <div class="user-info">
                    <span>Dr. JoÃ£o Silva</span>
                    <div class="user-avatar">JS</div>
                </div>
            </header>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">15</div>
                    <div class="stat-label">Pendentes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Hoje</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">23</div>
                    <div class="stat-label">Esta Semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">127</div>
                    <div class="stat-label">Este MÃªs</div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Action Buttons -->
                <div style="display: flex; gap: 15px; margin-bottom: 30px; align-items: center; flex-wrap: wrap;">
                    <button class="btn" onclick="openRequestExamModal()">
                        ğŸ”¬ Solicitar Exame
                    </button>
                    <button class="btn btn-secondary" onclick="openResultModal()">
                        ğŸ“Š Registrar Resultado
                    </button>
                    <div style="display: flex; gap: 10px; margin-left: auto; flex-wrap: wrap;">
                        <input type="date" id="filterDate" class="form-control" style="width: auto;">
                        <select id="filterStatus" style="width: auto;">
                            <option value="">Todos os Status</option>
                            <option value="solicitado">Solicitado</option>
                            <option value="agendado">Agendado</option>
                            <option value="realizado">Realizado</option>
                            <option value="resultado_pronto">Resultado Pronto</option>
                            <option value="entregue">Entregue</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                        <select id="filterType" style="width: auto;">
                            <option value="">Todos os Tipos</option>
                            <option value="laboratorio">LaboratÃ³rio</option>
                            <option value="imagem">Imagem</option>
                            <option value="cardiologico">CardiolÃ³gico</option>
                            <option value="neurologico">NeurolÃ³gico</option>
                        </select>
                    </div>
                </div>

                <!-- Exams List -->
                <div id="examsList">
                    <!-- Today's Exams -->
                    <h3 style="color: #2c3e50; margin-bottom: 20px; border-left: 4px solid #e74c3c; padding-left: 15px;">
                        ğŸ”¬ Exames de Hoje - 30 de Junho, 2025
                    </h3>

                    <div class="exam-card">
                        <div class="exam-header">
                            <div>
                                <div class="exam-title">Hemograma Completo</div>
                                <div style="color: #666; margin: 5px 0;">
                                    ğŸ‘¤ <strong>Maria Santos Silva</strong> | ğŸ†” #001
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="exam-date">30/06/2025 - 08:00</div>
                                <span class="status-badge status-realizado" style="background: #d4edda; color: #155724;">Realizado</span>
                            </div>
                        </div>
                        <div class="exam-result">
                            <strong>ğŸ“‹ Tipo:</strong> LaboratÃ³rio | <strong>ğŸ¥ Local:</strong> Lab Central<br>
                            <strong>ğŸ“ IndicaÃ§Ã£o:</strong> Rotina prÃ©-operatÃ³ria<br>
                            <strong>âš ï¸ ObservaÃ§Ãµes:</strong> Paciente em jejum de 12h
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn-small btn-primary" onclick="viewResult(1)">ğŸ“Š Ver Resultado</button>
                            <button class="btn-small btn-success" onclick="downloadResult(1)">ğŸ“¥ Download</button>
                            <button class="btn-small btn-warning" onclick="sendToPatient(1)">ğŸ“§ Enviar ao Paciente</button>
                            <button class="btn-small btn-primary" onclick="printResult(1)">ğŸ–¨ï¸ Imprimir</button>
                        </div>
                    </div>

                    <div class="exam-card">
                        <div class="exam-header">
                            <div>
                                <div class="exam-title">Raio-X TÃ³rax</div>
                                <div style="color: #666; margin: 5px 0;">
                                    ğŸ‘¤ <strong>JoÃ£o Oliveira</strong> | ğŸ†” #002
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="exam-date">30/06/2025 - 14:00</div>
                                <span class="status-badge status-agendado" style="background: #cce5ff; color: #004085;">Agendado</span>
                            </div>
                        </div>
                        <div class="exam-result">
                            <strong>ğŸ“‹ Tipo:</strong> Imagem | <strong>ğŸ¥ Local:</strong> ClÃ­nica RadiolÃ³gica<br>
                            <strong>ğŸ“ IndicaÃ§Ã£o:</strong> InvestigaÃ§Ã£o de tosse persistente<br>
                            <strong>âš ï¸ PreparaÃ§Ã£o:</strong> Remover objetos metÃ¡licos
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn-small btn-warning" onclick="rescheduleExam(2)">ğŸ“… Reagendar</button>
                            <button class="btn-small btn-success" onclick="viewPatient(2)">ğŸ‘¤ Ver Paciente</button>
                            <button class="btn-small btn-danger" onclick="cancelExam(2)">âŒ Cancelar</button>
                        </div>
                    </div>

                    <!-- Pending Results -->
                    <h3 style="color: #2c3e50; margin: 40px 0 20px 0; border-left: 4px solid #f39c12; padding-left: 15px;">
                        â³ Resultados Pendentes
                    </h3>

                    <div class="exam-card">
                        <div class="exam-header">
                            <div>
                                <div class="exam-title">Ecocardiograma</div>
                                <div style="color: #666; margin: 5px 0;">
                                    ğŸ‘¤ <strong>Carlos Ferreira</strong> | ğŸ†” #004
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="exam-date">28/06/2025</div>
                                <span class="status-badge status-realizado" style="background: #d4edda; color: #155724;">Realizado</span>
                            </div>
                        </div>
                        <div class="exam-result">
                            <strong>ğŸ“‹ Tipo:</strong> CardiolÃ³gico | <strong>ğŸ¥ Local:</strong> Cardio Center<br>
                            <strong>ğŸ“ IndicaÃ§Ã£o:</strong> AvaliaÃ§Ã£o da funÃ§Ã£o cardÃ­aca<br>
                            <strong>ğŸ“ Status:</strong> Aguardando laudo do especialista
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn-small btn-primary" onclick="followUpExam(4)">ğŸ“ Acompanhar</button>
                            <button class="btn-small btn-warning" onclick="requestUrgent(4)">âš¡ Urgente</button>
                            <button class="btn-small btn-success" onclick="viewPatient(4)">ğŸ‘¤ Ver Paciente</button>
                        </div>
                    </div>

                    <!-- Recent Results -->
                    <h3 style="color: #2c3e50; margin: 40px 0 20px 0; border-left: 4px solid #27ae60; padding-left: 15px;">
                        âœ… Resultados Recentes
                    </h3>

                    <div class="exam-card">
                        <div class="exam-header">
                            <div>
                                <div class="exam-title">Glicemia de Jejum</div>
                                <div style="color: #666; margin: 5px 0;">
                                    ğŸ‘¤ <strong>Lucia Mendes</strong> | ğŸ†” #005
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="exam-date">29/06/2025</div>
                                <span class="status-badge status-completed" style="background: #cce5ff; color: #004085;">Resultado Pronto</span>
                            </div>
                        </div>
                        <div class="exam-result">
                            <strong>ğŸ“‹ Tipo:</strong> LaboratÃ³rio | <strong>ğŸ¥ Local:</strong> Lab Express<br>
                            <strong>ğŸ“Š Resultado:</strong> 95 mg/dL (Normal)<br>
                            <strong>ğŸ“ ObservaÃ§Ã£o:</strong> Valores dentro da normalidade
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn-small btn-primary" onclick="viewResult(5)">ğŸ“Š Ver Completo</button>
                            <button class="btn-small btn-success" onclick="downloadResult(5)">ğŸ“¥ Download</button>
                            <button class="btn-small btn-warning" onclick="scheduleFollowUp(5)">ğŸ“… Agendar Retorno</button>
                            <button class="btn-small btn-primary" onclick="addToHistory(5)">ğŸ“‹ Adicionar ao HistÃ³rico</button>
                        </div>
                    </div>

                    <div class="exam-card">
                        <div class="exam-header">
                            <div>
                                <div class="exam-title">Ultrassom Abdominal</div>
                                <div style="color: #666; margin: 5px 0;">
                                    ğŸ‘¤ <strong>Ana Costa</strong> | ğŸ†” #003
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="exam-date">27/06/2025</div>
                                <span class="status-badge status-entregue" style="background: #d1ecf1; color: #0c5460;">Entregue</span>
                            </div>
                        </div>
                        <div class="exam-result">
                            <strong>ğŸ“‹ Tipo:</strong> Imagem | <strong>ğŸ¥ Local:</strong> DiagnÃ³stico Center<br>
                            <strong>ğŸ“Š Resultado:</strong> Estruturas dentro da normalidade<br>
                            <strong>ğŸ“ ObservaÃ§Ã£o:</strong> Resultado entregue ao paciente
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn-small btn-primary" onclick="viewResult(3)">ğŸ“Š Ver Resultado</button>
                            <button class="btn-small btn-success" onclick="viewPatient(3)">ğŸ‘¤ Ver Paciente</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Request Exam Modal -->
    <div id="requestExamModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ”¬ Solicitar Exame</h2>
            
            <form id="requestExamForm">
                <div class="form-group">
                    <label for="examPatient">Paciente *</label>
                    <select id="examPatient" required>
                        <option value="">Selecione um paciente...</option>
                        <option value="1">Maria Santos Silva</option>
                        <option value="2">JoÃ£o Oliveira</option>
                        <option value="3">Ana Costa</option>
                        <option value="4">Carlos Ferreira</option>
                        <option value="5">Lucia Mendes</option>
                    </select>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="examType">Tipo de Exame *</label>
                        <select id="examType" required>
                            <option value="">Selecione...</option>
                            <option value="laboratorio">LaboratÃ³rio</option>
                            <option value="imagem">Imagem</option>
                            <option value="cardiologico">CardiolÃ³gico</option>
                            <option value="neurologico">NeurolÃ³gico</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="examName">Nome do Exame *</label>
                        <select id="examName" required>
                            <option value="">Selecione o tipo primeiro...</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="examIndication">IndicaÃ§Ã£o ClÃ­nica *</label>
                    <textarea id="examIndication" rows="3" required placeholder="Descreva a indicaÃ§Ã£o mÃ©dica para este exame..."></textarea>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="examUrgency">UrgÃªncia</label>
                        <select id="examUrgency">
                            <option value="rotina">Rotina</option>
                            <option value="urgente">Urgente</option>
                            <option value="emergencia">EmergÃªncia</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="examDate">Data Desejada</label>
                        <input type="date" id="examDate">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="examPreparation">PreparaÃ§Ã£o NecessÃ¡ria</label>
                    <textarea id="examPreparation" rows="2" placeholder="InstruÃ§Ãµes de preparo (jejum, medicamentos, etc.)..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="examObservations">ObservaÃ§Ãµes</label>
                    <textarea id="examObservations" rows="2" placeholder="ObservaÃ§Ãµes adicionais..."></textarea>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeRequestExamModal()">Cancelar</button>
                    <button type="submit" class="btn">Solicitar Exame</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="resultModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ“Š Registrar Resultado</h2>
            
            <form id="resultForm">
                <div class="form-group">
                    <label for="resultExam">Exame *</label>
                    <select id="resultExam" required>
                        <option value="">Selecione um exame...</option>
                        <option value="1">Hemograma - Maria Santos</option>
                        <option value="2">Raio-X - JoÃ£o Oliveira</option>
                        <option value="4">Ecocardiograma - Carlos Ferreira</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="resultFile">Arquivo do Resultado</label>
                    <input type="file" id="resultFile" accept=".pdf,.jpg,.png,.doc,.docx">
                </div>
                
                <div class="form-group">
                    <label for="resultDescription">DescriÃ§Ã£o do Resultado *</label>
                    <textarea id="resultDescription" rows="4" required placeholder="Descreva os principais achados..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="resultStatus">Status *</label>
                    <select id="resultStatus" required>
                        <option value="normal">Normal</option>
                        <option value="alterado">Alterado</option>
                        <option value="inconclusivo">Inconclusivo</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeResultModal()">Cancelar</button>
                    <button type="submit" class="btn">Registrar Resultado</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../back-end/exams.js"></script>
</body>
</html>