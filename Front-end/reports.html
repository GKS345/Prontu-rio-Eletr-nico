<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema M√©dico - Relat√≥rios</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard">
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">MediSystem</div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html">üìä Vis√£o Geral</a></li>
                <li><a href="patients.html">üë• Pacientes</a></li>
                <li><a href="new-patient.html">‚ûï Novo Paciente</a></li>
                <li><a href="appointments.html">üìÖ Consultas</a></li>
                <li><a href="exams.html">üî¨ Exames</a></li>
                <li><a href="prescriptions.html">üíä Receitas</a></li>
                <li><a href="reports.html" class="active">üìã Relat√≥rios</a></li>
                <li><a href="index.html">üö™ Sair</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="header">
                <h1 class="page-title">Relat√≥rios</h1>
                <div class="user-info">
                    <span>Dr. Jo√£o Silva</span>
                    <div class="user-avatar">JS</div>
                </div>
            </div>

            <div class="content-area">
                <!-- Filtros de Relat√≥rio -->
                <div class="exam-card">
                    <div class="exam-header">
                        <h2 class="exam-title">Filtros de Relat√≥rio</h2>
                    </div>
                    <form id="reportFilters">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="reportType">Tipo de Relat√≥rio:</label>
                                <select id="reportType" onchange="updateReportOptions()">
                                    <option value="">Selecione o tipo</option>
                                    <option value="patients">Relat√≥rio de Pacientes</option>
                                    <option value="appointments">Relat√≥rio de Consultas</option>
                                    <option value="prescriptions">Relat√≥rio de Receitas</option>
                                    <option value="exams">Relat√≥rio de Exames</option>
                                    <option value="financial">Relat√≥rio Financeiro</option>
                                    <option value="statistics">Relat√≥rio Estat√≠stico</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="dateFrom">Data Inicial:</label>
                                <input type="date" id="dateFrom">
                            </div>
                            
                            <div class="form-group">
                                <label for="dateTo">Data Final:</label>
                                <input type="date" id="dateTo">
                            </div>
                            
                            <div class="form-group">
                                <label for="status">Status:</label>
                                <select id="status">
                                    <option value="">Todos</option>
                                    <option value="active">Ativo</option>
                                    <option value="completed">Conclu√≠do</option>
                                    <option value="pending">Pendente</option>
                                    <option value="cancelled">Cancelado</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group" id="additionalFilters" style="display: none;">
                            <label for="specificFilter">Filtro Espec√≠fico:</label>
                            <select id="specificFilter">
                                <!-- Options will be populated by JavaScript -->
                            </select>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <button type="button" class="btn" onclick="generateReport()">üìä Gerar Relat√≥rio</button>
                            <button type="button" class="btn btn-secondary" onclick="clearFilters()">üîÑ Limpar Filtros</button>
                        </div>
                    </form>
                </div>

                <!-- Relat√≥rios R√°pidos -->
                <div class="stats-grid">
                    <div class="stat-card" onclick="generateQuickReport('today')">
                        <div class="stat-number">28</div>
                        <div class="stat-label">Atendimentos Hoje</div>
                        <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">Clique para ver detalhes</div>
                    </div>
                    <div class="stat-card" onclick="generateQuickReport('week')">
                        <div class="stat-number">156</div>
                        <div class="stat-label">Esta Semana</div>
                        <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">Clique para ver detalhes</div>
                    </div>
                    <div class="stat-card" onclick="generateQuickReport('month')">
                        <div class="stat-number">642</div>
                        <div class="stat-label">Este M√™s</div>
                        <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">Clique para ver detalhes</div>
                    </div>
                    <div class="stat-card" onclick="generateQuickReport('revenue')">
                        <div class="stat-number">R$ 28.450</div>
                        <div class="stat-label">Receita Mensal</div>
                        <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">Clique para ver detalhes</div>
                    </div>
                </div>

                <!-- √Årea de Resultados -->
                <div id="reportResults" style="display: none;">
                    <h2 style="margin: 30px 0 20px 0; color: #2c3e50;">Resultado do Relat√≥rio</h2>
                    
                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title" id="reportTitle">Relat√≥rio Gerado</h3>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn-small btn-primary" onclick="exportReport('pdf')">üìÑ PDF</button>
                                <button class="btn-small btn-success" onclick="exportReport('excel')">üìä Excel</button>
                                <button class="btn-small btn-warning" onclick="exportReport('csv')">üìã CSV</button>
                                <button class="btn-small btn-danger" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                            </div>
                        </div>
                        
                        <div id="reportContent">
                            <!-- Conte√∫do ser√° gerado dinamicamente -->
                        </div>
                    </div>
                </div>

                <!-- Relat√≥rios Salvos -->
                <h2 style="margin: 40px 0 20px 0; color: #2c3e50;">Relat√≥rios Salvos</h2>
                
                <div class="patient-card">
                    <div class="patient-name">Relat√≥rio Mensal - Junho 2025</div>
                    <div class="patient-info">
                        <strong>Tipo:</strong> Relat√≥rio Estat√≠stico<br>
                        <strong>Per√≠odo:</strong> 01/06/2025 - 30/06/2025<br>
                        <strong>Gerado em:</strong> 28/06/2025 14:30<br>
                        <strong>P√°ginas:</strong> 12
                    </div>
                    <div class="patient-actions">
                        <button class="btn-small btn-primary" onclick="viewSavedReport('1')">üëÅÔ∏è Visualizar</button>
                        <button class="btn-small btn-success" onclick="downloadReport('1')">‚¨áÔ∏è Download</button>
                        <button class="btn-small btn-warning" onclick="shareReport('1')">üì§ Compartilhar</button>
                        <button class="btn-small btn-danger" onclick="deleteSavedReport('1')">üóëÔ∏è Excluir</button>
                    </div>
                </div>

                <div class="patient-card">
                    <div class="patient-name">Relat√≥rio de Receitas - Semana 25</div>
                    <div class="patient-info">
                        <strong>Tipo:</strong> Relat√≥rio de Receitas<br>
                        <strong>Per√≠odo:</strong> 17/06/2025 - 23/06/2025<br>
                        <strong>Gerado em:</strong> 24/06/2025 09:15<br>
                        <strong>P√°ginas:</strong> 8
                    </div>
                    <div class="patient-actions">
                        <button class="btn-small btn-primary" onclick="viewSavedReport('2')">üëÅÔ∏è Visualizar</button>
                        <button class="btn-small btn-success" onclick="downloadReport('2')">‚¨áÔ∏è Download</button>
                        <button class="btn-small btn-warning" onclick="shareReport('2')">üì§ Compartilhar</button>
                        <button class="btn-small btn-danger" onclick="deleteSavedReport('2')">üóëÔ∏è Excluir</button>
                    </div>
                </div>

                <div class="patient-card">
                    <div class="patient-name">Relat√≥rio Financeiro - Q2 2025</div>
                    <div class="patient-info">
                        <strong>Tipo:</strong> Relat√≥rio Financeiro<br>
                        <strong>Per√≠odo:</strong> 01/04/2025 - 30/06/2025<br>
                        <strong>Gerado em:</strong> 20/06/2025 16:45<br>
                        <strong>P√°ginas:</strong> 15
                    </div>
                    <div class="patient-actions">
                        <button class="btn-small btn-primary" onclick="viewSavedReport('3')">üëÅÔ∏è Visualizar</button>
                        <button class="btn-small btn-success" onclick="downloadReport('3')">‚¨áÔ∏è Download</button>
                        <button class="btn-small btn-warning" onclick="shareReport('3')">üì§ Compartilhar</button>
                        <button class="btn-small btn-danger" onclick="deleteSavedReport('3')">üóëÔ∏è Excluir</button>
                    </div>
                </div>

                <!-- Templates de Relat√≥rio -->
                <h2 style="margin: 40px 0 20px 0; color: #2c3e50;">Templates de Relat√≥rio</h2>
                
                <div class="form-grid">
                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title">üìä Relat√≥rio Estat√≠stico</h3>
                        </div>
                        <p style="margin-bottom: 15px; color: #666;">
                            An√°lise completa de atendimentos, receitas e exames por per√≠odo.
                        </p>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-small btn-primary" onclick="useTemplate('statistics')">üìã Usar Template</button>
                            <button class="btn-small btn-secondary" onclick="previewTemplate('statistics')">üëÅÔ∏è Pr√©via</button>
                        </div>
                    </div>

                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title">üí∞ Relat√≥rio Financeiro</h3>
                        </div>
                        <p style="margin-bottom: 15px; color: #666;">
                            An√°lise de receitas, despesas e faturamento por per√≠odo.
                        </p>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-small btn-primary" onclick="useTemplate('financial')">üìã Usar Template</button>
                            <button class="btn-small btn-secondary" onclick="previewTemplate('financial')">üëÅÔ∏è Pr√©via</button>
                        </div>
                    </div>

                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title">üë• Relat√≥rio de Pacientes</h3>
                        </div>
                        <p style="margin-bottom: 15px; color: #666;">
                            Cadastros, consultas e hist√≥rico m√©dico dos pacientes.
                        </p>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-small btn-primary" onclick="useTemplate('patients')">üìã Usar Template</button>
                            <button class="btn-small btn-secondary" onclick="previewTemplate('patients')">üëÅÔ∏è Pr√©via</button>
                        </div>
                    </div>

                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title">üíä Relat√≥rio de Medicamentos</h3>
                        </div>
                        <p style="margin-bottom: 15px; color: #666;">
                            Receitas emitidas, medicamentos mais prescritos e estat√≠sticas.
                        </p>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-small btn-primary" onclick="useTemplate('medications')">üìã Usar Template</button>
                            <button class="btn-small btn-secondary" onclick="previewTemplate('medications')">üëÅÔ∏è Pr√©via</button>
                        </div>
                    </div>
                </div>

                <!-- Agendamento de Relat√≥rios -->
                <h2 style="margin: 40px 0 20px 0; color: #2c3e50;">Agendamento de Relat√≥rios</h2>
                
                <div class="exam-card">
                    <div class="exam-header">
                        <h3 class="exam-title">üìÖ Relat√≥rios Autom√°ticos</h3>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Relat√≥rio</th>
                                <th>Frequ√™ncia</th>
                                <th>Pr√≥xima Execu√ß√£o</th>
                                <th>Destinat√°rios</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Relat√≥rio Mensal</td>
                                <td>Mensal</td>
                                <td>01/07/2025 08:00</td>
                                <td>admin@medisystem.com</td>
                                <td><span class="status-badge status-active">Ativo</span></td>
                                <td>
                                    <button class="btn-small btn-warning" onclick="editScheduledReport('1')">‚úèÔ∏è Editar</button>
                                    <button class="btn-small btn-danger" onclick="deleteScheduledReport('1')">üóëÔ∏è Excluir</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Relat√≥rio Semanal</td>
                                <td>Semanal</td>
                                <td>07/07/2025 07:00</td>
                                <td>secretaria@medisystem.com</td>
                                <td><span class="status-badge status-active">Ativo</span></td>
                                <td>
                                    <button class="btn-small btn-warning" onclick="editScheduledReport('2')">‚úèÔ∏è Editar</button>
                                    <button class="btn-small btn-danger" onclick="deleteScheduledReport('2')">üóëÔ∏è Excluir</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="showScheduleForm()">‚è∞ Agendar Novo Relat√≥rio</button>
                    </div>
                </div>

                <!-- Formul√°rio de Agendamento (oculto) -->
                <div id="scheduleForm" style="display: none; margin-top: 20px;">
                    <div class="exam-card">
                        <div class="exam-header">
                            <h3 class="exam-title">üìÖ Agendar Relat√≥rio</h3>
                        </div>
                        
                        <form>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="scheduleReportType">Tipo de Relat√≥rio:</label>
                                    <select id="scheduleReportType" required>
                                        <option value="">Selecione</option>
                                        <option value="statistics">Estat√≠stico</option>
                                        <option value="financial">Financeiro</option>
                                        <option value="patients">Pacientes</option>
                                        <option value="medications">Medicamentos</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="frequency">Frequ√™ncia:</label>
                                    <select id="frequency" required>
                                        <option value="">Selecione</option>
                                        <option value="daily">Di√°rio</option>
                                        <option value="weekly">Semanal</option>
                                        <option value="monthly">Mensal</option>
                                        <option value="quarterly">Trimestral</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="scheduleTime">Hor√°rio:</label>
                                    <input type="time" id="scheduleTime" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="recipients">Destinat√°rios:</label>
                                    <input type="email" id="recipients" placeholder="email@exemplo.com" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="scheduleNotes">Observa√ß√µes:</label>
                                <textarea id="scheduleNotes" rows="3" placeholder="Observa√ß√µes sobre o relat√≥rio agendado..."></textarea>
                            </div>
                            
                            <div style="margin-top: 20px; display: flex; gap: 10px;">
                                <button type="submit" class="btn">üíæ Salvar Agendamento</button>
                                <button type="button" class="btn btn-secondary" onclick="hideScheduleForm()">‚ùå Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../back-end/reports.js"></script>
</body>
</html>